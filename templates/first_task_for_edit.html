<!doctype html>
<html lang="ru">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="PHHask">
    <meta property="og:site_name" content="PHHask">
    <meta property="og:url" content="http://www.phhask.space/phys/task_1">
    <meta property="og:description" content="Это сайт для решения однотипных задач по физике.">
    <meta property="og:image" content="staticimages/ico2.png">
    <meta name="yandex-verification" content="c3d1bacbc9c1efc0"/>

    <!-- Bootstrap CSS -->
    <link href="static/css/bootstrap.min.css" rel="stylesheet"
          integrity="" crossorigin="anonymous">
    <link rel="stylesheet" href="static/css/style.css">
    <link rel="icon" href="static/images/ico2.png" type="image/png">
    <script type="text/javascript" src="static/js/jquery-3.5.1.min.js"></script>
    <script src="static/js/bootstrap-input-spinner.js"></script>
<!--    <script src="https://mozilla.github.io/nunjucks/files/nunjucks.min.js"></script>-->

    <title>PHHask</title>
    <meta name="Description"
          content="Это сайт для решение однотипных задач по физике, где надо найти токи в нескольких ветвях между двумя узлами."/>

</head>
<body>
<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function (m, e, t, r, i, k, a) {
        m[i] = m[i] || function () {
            (m[i].a = m[i].a || []).push(arguments)
        };
        m[i].l = 1 * new Date();
        k = e.createElement(t), a = e.getElementsByTagName(t)[0], k.async = 1, k.src = r, a.parentNode.insertBefore(k, a)
    })
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(72782878, "init", {
        clickmap: true,
        trackLinks: true,
        accurateTrackBounce: true,
        webvisor: true
    });
</script>
<noscript>
    <div><img src="https://mc.yandex.ru/watch/72782878" style="position:absolute; left:-9999px;" alt=""/></div>
</noscript>
<!-- /Yandex.Metrika counter -->
<script>
    var last_num_numbers = 3;


    function lines_(num) {
        let array = []
        let lines_num = document.forms[0].elements.lines.value
        for (let i = 0; i < lines_num + 1; i++) {

            el = document.getElementById(i.toString())
            try {
                let elementChildrens = el.children
                if (elementChildrens.length === 3) {
                    for (let i = 0; i < elementChildrens.length; i++) {
                        array.push(elementChildrens[i].value)
                    }
                }
            } catch (e) {
                console.log(e)
            }

        }
        num = parseInt(num)
        if (num >= 2) {
            last_num_numbers += 1
            document.getElementById("lines").innerHTML = ''
            num += 1
            for (let g = 1; g < num; g++) {
                document.getElementById("lines").insertAdjacentHTML("beforeend", '<div class="input-group pb-1" id="' + g.toString() + '"> <input type="number" class="form-control" aria-label="Text input with dropdown button" placeholder="Сопротивление" name="' + g.toString() + 'R" id="' + g.toString() + 'R" value="asd"> <select class="form-select" aria-label="Default select example" name="' + g.toString() + 'D" id="' + g.toString() + 'D"> <option selected>Направление</option> <option value="L">L</option> <option value="R">R</option> </select> <input type="number" class="form-control" aria-label="Text input with dropdown button" placeholder="Вольтаж" name="' + g.toString() + 'V" id="' + g.toString() + 'V"> </div>');
            }
            let lines_num = document.forms[0].elements.lines.value
            for (let i = 1; i < lines_num + 1; i++) {

                el = document.getElementById(i.toString())
                try {
                    if (array.length == 0) {
                        break
                    }
                    let elementChildrens = el.children
                    if (elementChildrens.length === 3) {
                        for (let i = 0; i < elementChildrens.length; i++) {
                            elementChildrens[i].value = array.shift()
                        }
                    }
                } catch (e) {
                    console.log(e)
                }

            }

        }
        last_num_numbers = num - 1

    }
</script>
<form action="/phys/task_1" method="post">
    <div class="p-3" id="0">

        <input data-prefix="Колличество ветвей" name="lines" type="number" min=2 class="form-control" aria-label=""
               value={{lines}} onchange="lines_(this.value)">

    </div>
    <div class="px-3" id="lines">
        {% for i in ran %}
            <div class="input-group pb-1" id="{{i}}">
                <input type="number" class="form-control" aria-label="Text input with dropdown button"
                    placeholder="Сопротивление" name="{{i}}R" id="{{i}}R">
                <select class="form-select" aria-label="Default select example" name="{{i}}D" id="{{i}}D">
                    <option selected>Направление</option>
                    <option value="L">L</option>
                    <option value="R">R</option>
                </select>
                <input type="number" class="form-control" aria-label="Text input with dropdown button" placeholder="Вольтаж" name="{{i}}V" id="{{i}}V">
            </div>
        {% endfor %}
    </div>


<div class="d-flex flex-row-reverse justify-content-between px-3 pb-2" id="4">
    <button class="btn btn-outline-primary" type="submit" >Решить</button>
    <button type="button" class="btn btn-outline-info" onclick='document.location.replace("/")'>Вернуться на главный экран</button>
</div>
</form>
<script>
    {% for el in elems %}
        var sel = document.getElementById("{{el['name']}}")
        sel.value = "{{el['content']}}"
    {% endfor %}
</script>
<footer class="py-2 d-flex justify-content-center" id='footer'>
    <a href="https://github.com/Cynep-SU">
        <img src="static/images/pankoff.png" alt="HTML tutorial" style="width:78px;height:78px;">
    </a>
</footer>
<!-- Optional JavaScript; choose one of the two! -->

<!-- Option 1: Bootstrap Bundle with Popper -->
<script src="static/js/bootstrap.bundle.min.js"
        integrity=""
        crossorigin="anonymous"></script>

<!-- Option 2: Separate Popper and Bootstrap JS -->
<!--
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js" integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj" crossorigin="anonymous"></script>
-->
</body>
<script>
    $("input[name='lines']").inputSpinner({
        template: '<div class="input-group ${groupClass}">\n' +
            '<div class="input-group-prepend"></div>\n' +
            '<input type="text" inputmode="decimal" style="text-align: ${textAlign}" class="form-control"/>\n' +
            '<div class="input-group-append">\n' +
            '<button style="min-width: ${buttonsWidth}" class="btn btn-decrement ${buttonsClass}" type="button">${decrementButton}</button>\n' +
            '<button style="min-width: ${buttonsWidth}" class="btn btn-increment ${buttonsClass}" type="button">${incrementButton}</button>\n' +
            '</div></div>'
    })

</script>
</html>
